<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS-JS | Train</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=IM+Fell+English+SC&family=Prompt:wght@100;300;500;600;700&family=Quicksand:wght@300;400;500;600;700&family=Rancho&family=Rubik:wght@300&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../html-css-train/style.css">
    <link rel="stylesheet" href="assets/css/style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
</head>
<body>
    <nav>
        <div class="container">
            <div class="logo-holder sot-logo">
                <img src="https://images.vexels.com/media/users/3/127047/isolated/preview/b9b0d209c25aac4280049f2497ac20ec-adventure-travel-camping-badge.png" alt="">
            </div>
            <ul>
                <!-- <li><a href="#section-1">Explore</a></li>
                <li><a href="#section-2">Video</a></li> -->
                <li><a href="#section-3">Adventurers</a></li>
                <li class="profile-icon">
                    <button >
                        <figure>
                            <img src="https://scontent.fmnl30-2.fna.fbcdn.net/v/t1.6435-9/135284681_101038811963853_4389096594891896932_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=09cbfe&_nc_eui2=AeH4_g2qYtr4C1gDg-HPlW8FzD3snaGd0O7MPeydoZ3Q7tdfRzS39ocAD15rsDmKGHDBeF44d3FTWAKtnTfNqc7w&_nc_ohc=8V_CKzVYbysAX9Su-9F&_nc_ht=scontent.fmnl30-2.fna&oh=00_AT8-I2_8a9hgJXfPjRuOHKOyQFut7Dvr64hBqAHOmve1pg&oe=62DB9298" alt="">
                        </figure>
                        <ul class="dropdown">
                            <li><span>HollowJoker</span></li>
                            <li><a href="">My Profile</a></li>
                            <div class="divider"></div>
                            <li><a href="">Logout</a></li>
                        </ul>
                    </button>
                </li>
            </ul>
        </div>
    </nav>
    <header id="hero-banner" class="header">
        <div class="header-loading-overlay" data-loading-overlay="0"></div>
        <video autoplay controls muted  data-current-video="0" >
            <source src="assets/video/KOLD - My Year 2016.mp4" type="video/mp4">
        </video>
        <div class="container">
            <div class="adventurers-content" data-main-video="details">
                <figure>
                    <img src="https://yt3.ggpht.com/ytc/AKedOLTMP27nibIu7zzXID9R3m8HoCjjf4wbJW60DAVqfg=s176-c-k-c0x00ffffff-no-rj" alt="">
                </figure>
                <div class="adventurers-content_body">
                    <h3>kold</h3>
                    <h5>KOLD - My Year 2016</h5>
                    <ul>
                        <li>7.3M views</li>
                        <li>5 years ago</li>
                    </ul>
                </div>
                <div class="adventurers-content_cta">
                    <a href="https://www.youtube.com/watch?v=QJbpJQscn9E" target="_blank" class="o-btn o-btn-trans o-btn-small o-btn-cir-primary">
                        <i class="fa fa-youtube-play"></i>
                    </a>
                    <button class="o-btn o-btn-trans o-btn-small o-btn-cir-primary" data-main-control="playing">
                        <i class="fa fa-pause"></i>
                    </button>
                </div>
            </div>
        </div>
        <button class="video-control" data-video-mute="true">
            <i class="fa fa-volume-up" aria-hidden="true"></i>
            <span>Play with Sounds</span>
        </button>
    </header>

    <section class="adventurers">
        <div class="graphic-holder"></div>
        <div class="container">
            <div class="adventurers-logo">
                <figure>
                    <img src="https://i.pinimg.com/originals/52/a8/1f/52a81f87c87c1b91984da36aa3f3c8be.png" alt="">
                </figure>
            </div>
            <h2>Adventurers</h2>
            <div class="adventurers-holder">
                <div class="adventurers-cards" data-video-cards>
                    <div class="adventurers-cards_items">
                        <div class="adventurers-video">
                            <video autoplay muted loop>
                                <source src="assets/video/KOLD - My Year 2016.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="adventurers-content">
                            <div class="adventurers-content_header">
                                <figure>
                                    <img src="https://yt3.ggpht.com/ytc/AKedOLTMP27nibIu7zzXID9R3m8HoCjjf4wbJW60DAVqfg=s176-c-k-c0x00ffffff-no-rj" alt="">
                                </figure>
                                <div class="adventurers-content_cta">
                                    <a href="https://www.youtube.com/watch?v=QJbpJQscn9E" target="_blank" class="o-btn o-btn-trans o-btn-small o-btn-cir-primary">
                                        <i class="fa fa-youtube-play"></i>
                                    </a>
                                    <button class="o-btn o-btn-trans o-btn-small o-btn-cir-primary">
                                        <i class="fa fa-play"></i>
                                    </button>
                                </div>
                            </div>
                            <h3>kold</h3>
                            <h5>KOLD - My Year 2016</h5>
                            <ul>
                                <li>7.3M views</li>
                                <li>5 years ago</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="adventurers-cards" data-video-cards>
                    <div class="adventurers-cards_items">
                        <div class="adventurers-video">
                            <video autoplay muted loop>
                                <source src="assets/video/The Philippines _ Cinematic video.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="adventurers-content">
                            <div class="adventurers-content_header">
                                <figure>
                                    <img src="https://yt3.ggpht.com/p0iI_1cynIzqqEecoi39Es9PzHlj8UbiUDDJHW8Vl4vMgiS4_17_0q6uajN5HQ4wXoWoWPpA3Q=s176-c-k-c0x00ffffff-no-rj" alt="">
                                </figure>
                                <div class="adventurers-content_cta">
                                    <a href="https://www.youtube.com/watch?v=u2wJWA5cTSY" target="_blank" class="o-btn o-btn-trans o-btn-small o-btn-cir-primary">
                                        <i class="fa fa-youtube-play"></i>
                                    </a>
                                    <button class="o-btn o-btn-trans o-btn-small o-btn-cir-primary">
                                        <i class="fa fa-play"></i>
                                    </button>
                                </div>
                            </div>
                            <h3>JustKay</h3>
                            <h5>The Philippines | Cinematic video</h5>
                            <ul>
                                <li>1.03M views</li>
                                <li>3 years ago</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="adventurers-cards" data-video-cards>
                    <div class="adventurers-cards_items">
                        <div class="adventurers-video">
                            <video autoplay muted loop>
                                <source src="assets/video/A TRIP TO PARADISE - Bali.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="adventurers-content">
                            <div class="adventurers-content_header">
                                <figure>
                                    <img src="https://yt3.ggpht.com/ytc/AKedOLQpwW7nzyOGuKMxChjwhqkIv3bGO9CI1_8L6ueBUA=s176-c-k-c0x00ffffff-no-rj" alt="">
                                </figure>
                                <div class="adventurers-content_cta">
                                    <a href="https://www.youtube.com/watch?v=e1SHsU3f32w" target="_blank" class="o-btn o-btn-trans o-btn-small o-btn-cir-primary">
                                        <i class="fa fa-youtube-play"></i>
                                    </a>
                                    <button class="o-btn o-btn-trans o-btn-small o-btn-cir-primary">
                                        <i class="fa fa-play"></i>
                                    </button>
                                </div>
                            </div>
                            <h3>Sam Cahill</h3>
                            <h5>KOLD - My Year 2016</h5>
                            <ul>
                                <li>1.2M views</li>
                                <li>5 years ago</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // onload video play
        const heroBanner = document.querySelector('#hero-banner');
        const videoBanner = document.querySelector('#hero-banner video');
        const mainVideoDetails = document.querySelector('[data-main-video="details"]');
        const loadingOvelay = document.querySelector('[data-loading-overlay]');
        const videoCards = document.querySelectorAll('[data-video-cards]');
        videoBanner.play();

        // play sound function
        const videoControl = document.querySelector('[data-video-mute]');
        videoControl.addEventListener('click', (el) => {
            const controllerEl = el.target.closest('[data-video-mute]');
            let muteValue = controllerEl.dataset.videoMute == 'true' ? false : true;
            el.target.dataset.videoMute = muteValue;
            videoBanner.muted = muteValue;
        });

        loadVideosAsPic();

        function loadVideosAsPic() {
            videoCards.forEach( (el, key) => {
                const eachVideo = el.querySelector('video');

                // setting this so we can have a thumbnail for the video
                setTimeout(() => {
                    eachVideo.pause();
                }, 2000);

                // mouseover mouseout action
                el.addEventListener('mouseover', (moEl) => {
                    eachVideo.play();
                });
                el.addEventListener('mouseout', (moEl) => {
                    eachVideo.pause();
                });

                el.addEventListener('click', (buttonEl) => {
                    settingMainVideoContent(el, key);
                });


            });
            
        }

        function enableSounds() {
            // unmute video since we have a user trigger action
            videoBanner.muted = false;
            document.querySelector('[data-video-mute]').dataset.videoMute = false;
        }

        function settingMainVideoContent(currentEl, elKey = 0) {
            setLoading(true);
            const adventurerPic = currentEl.querySelector('img').getAttribute('src');
            const adventurerName = currentEl.querySelector('h3').innerText;
            const adventurerVideo = currentEl.querySelector('h5').innerText;
            const adventurerList = currentEl.querySelectorAll('ul li');
            const adventurerVideoEl = currentEl.querySelector('video');
            const adventurerCurrentVideoTime = adventurerVideoEl.currentTime;
            const adventurerVideoSrc = adventurerVideoEl.querySelector('source').getAttribute('src');
            

            mainVideoDetails.querySelector('img').setAttribute('src', adventurerPic);
            mainVideoDetails.querySelector('h3').innerText = adventurerName;
            mainVideoDetails.querySelector('h5').innerText = adventurerVideo;
            adventurerList.forEach((liEl, key) => {
                mainVideoDetails.querySelectorAll('ul li')[key].innerText = liEl.innerText; 
            });
            document.querySelector('header').scrollIntoView({ behavior: 'smooth', block: 'start'});
            setTimeout(() => {
                videoBanner.dataset.currentVideo = elKey;
                videoBanner.querySelector('source').setAttribute('src', adventurerVideoSrc);
                videoBanner.load();
                videoBanner.currentTime = adventurerCurrentVideoTime;
                setLoading(false);
                enableSounds();
            }, 1500);
        }

        toggleMainVideo();
        function toggleMainVideo() {
            const mainVideoControl = document.querySelector('[data-main-control]');
            mainVideoControl.addEventListener('click', (el) => {
                const controllerEl = el.target.closest('[data-main-control]');
                const dataSet = controllerEl.dataset;
                const currentVideoStatus = dataSet.mainControl;
                const iconEl = controllerEl.querySelector('i');

                enableSounds();
                switch (currentVideoStatus) {
                    case 'playing':
                        videoBanner.pause();
                        dataSet.mainControl = 'paused';
                        iconEl.classList.remove("fa-pause");
                        iconEl.classList.add("fa-play");
                        break;
                    case 'paused':
                        videoBanner.play();
                        dataSet.mainControl = 'playing';
                        iconEl.classList.add("fa-pause");
                        iconEl.classList.remove("fa-play");
                        break;
                }
            });
        }

        function setLoading(state) {
            if (state) {
                loadingOvelay.classList.add('show');
            } else {
                loadingOvelay.classList.remove('show');
            }
        }

        checkVideoFinish();

        function checkVideoFinish() {
            videoBanner.addEventListener('ended',(el) => {
                const currentVideoKey = parseInt(el.target.dataset.currentVideo);
                if (currentVideoKey < videoCards.length -1 ) {
                    settingMainVideoContent(videoCards[currentVideoKey + 1], currentVideoKey + 1);
                } else {
                    settingMainVideoContent(videoCards[0], 0);
                }
            });
        }
    </script>
</body>
</html>